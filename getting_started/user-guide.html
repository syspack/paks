<!DOCTYPE html>
<html class="writer-html4" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>User Guide &mdash; Paks 0.1.1 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/sphinx-argparse.css" type="text/css" />
      <link rel="stylesheet" href="../_static/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Developer Guide" href="developer-guide.html" />
    <link rel="prev" title="Settings" href="settings.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> Paks
          </a>
              <div class="version">
                0.1.1
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Getting started</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="index.html">Getting Started</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">User Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#quick-start">Quick Start</a></li>
<li class="toctree-l2"><a class="reference internal" href="#commands">Commands</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#run">Run</a></li>
<li class="toctree-l3"><a class="reference internal" href="#env">Env</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#paks-commands">Paks Commands</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#save">Save</a></li>
<li class="toctree-l3"><a class="reference internal" href="#inspect">Inspect</a></li>
<li class="toctree-l3"><a class="reference internal" href="#load">Load</a></li>
<li class="toctree-l3"><a class="reference internal" href="#copy">Copy</a></li>
<li class="toctree-l3"><a class="reference internal" href="#environment">Environment</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#security">Security</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="developer-guide.html">Developer Guide</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../api_reference/paks.html">Paks API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_reference/internal/modules.html">Internal API</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Paks</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="index.html">Getting Started</a> &raquo;</li>
      <li>User Guide</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/getting_started/user-guide.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="user-guide">
<span id="getting-started-user-guide"></span><h1>User Guide<a class="headerlink" href="#user-guide" title="Permalink to this headline"></a></h1>
<p>Paks provides basic functionality to run interactive commands in container environments.
If you haven’t installed Paks yet you should read <a class="reference internal" href="installation.html#getting-started-installation"><span class="std std-ref">Installation</span></a> first. If you want to tweak
settings, read <a class="reference internal" href="settings.html#getting-started-settings"><span class="std std-ref">Settings</span></a>.</p>
<div class="section" id="quick-start">
<h2>Quick Start<a class="headerlink" href="#quick-start" title="Permalink to this headline"></a></h2>
<p>After installation, if you want user-level control over Paks settings (discussed next) you should create your own copy of the config file.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp"># </span>Init your user config
<span class="gp">$ </span>paks config init
</pre></div>
</div>
<p>This will create a <code class="docutils literal notranslate"><span class="pre">$HOME/.paks/settings.yml</span></code> that you can customize to override
the defaults. To quickly edit:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>paks config edit
</pre></div>
</div>
<p>The settings will let you choose your container technology and other features of paks.
Browse <a class="reference internal" href="settings.html#getting-started-settings"><span class="std std-ref">Settings</span></a> and ensure the settings are to your liking before continuing.
If you are looking to develop your own container interactions to share with others, see
the <a class="reference internal" href="developer-guide.html#getting-started-developer-guide"><span class="std std-ref">Developer Guide</span></a>.</p>
</div>
<div class="section" id="commands">
<h2>Commands<a class="headerlink" href="#commands" title="Permalink to this headline"></a></h2>
<p>Paks provides the following commands via the <code class="docutils literal notranslate"><span class="pre">paks</span></code> command line client.</p>
<div class="section" id="run">
<h3>Run<a class="headerlink" href="#run" title="Permalink to this headline"></a></h3>
<p>The most basic functionality is to run a container with paks, meaning that you get an interactive
environment with Paks commands supported. That looks like this:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>paks run ubuntu
</pre></div>
</div>
<p>By default, we will use the shell defined in your config, but you can one-off this
if needed:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>paks run --shell /bin/sh busybox
</pre></div>
</div>
<p>Or the container backend:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>paks run --container-tech podman busybox
</pre></div>
</div>
<p>And if you want to change a setting on the fly, you can add as many as you need with <code class="docutils literal notranslate"><span class="pre">-s</span></code>.
For example, we retrieve history assuming a particular user (default is root) and history file (<code class="docutils literal notranslate"><span class="pre">/root/.bash_history</span></code>)
and this might not be the case for your container. This would be using the defaults (no change):</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>paks run -s <span class="nv">user</span><span class="o">=</span>root -s history_file:/root/.bash_history ubuntu
</pre></div>
</div>
<p>Notice that we define a separate <code class="docutils literal notranslate"><span class="pre">-s</span></code> group for each.
This will take you into a shell where you can interact, and issue Paks commands,
discussed in the next section “Paks Commands.”</p>
</div>
<div class="section" id="env">
<h3>Env<a class="headerlink" href="#env" title="Permalink to this headline"></a></h3>
<p>Named environments are stored in <code class="docutils literal notranslate"><span class="pre">~/.paks/envs</span></code>, and they can be added to and loaded in containers.
but also on the host. You can use the paks command line tool to do this:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp"># </span>Add GITHUB_TOKEN to the named environment github
<span class="gp">$ </span>paks env add <span class="nv">GITHUB_TOKEN</span><span class="o">=</span>xxxxxxxxxxx github
<span class="go">GITHUB_TOKEN was added to environment github</span>

<span class="gp"># </span>Remove GITHUB_TOKEN to the named environment github
<span class="gp">$ </span>paks env rm <span class="nv">GITHUB_TOKEN</span><span class="o">=</span>xxxxxxxxxxx github
<span class="go">GITHUB_TOKEN was removed from environment github</span>
</pre></div>
</div>
<p>This would create an environment file <code class="docutils literal notranslate"><span class="pre">~/.paks/envs/github</span></code> that you could also
manually open up to tweak, or ask paks to open up your editor to tweak:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>paks env edit github
</pre></div>
</div>
<p>You can also quickly show an environment:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>paks env show github
<span class="go">GITHUB_TOKEN=xxxxxxxxxxx</span>
</pre></div>
</div>
<p>Note that envars can also be added on the fly in containers,
discussed in the next section.</p>
</div>
</div>
<div class="section" id="paks-commands">
<h2>Paks Commands<a class="headerlink" href="#paks-commands" title="Permalink to this headline"></a></h2>
<p>The following commands can be run from inside a container, e.g., after doing a
<code class="docutils literal notranslate"><span class="pre">paks</span> <span class="pre">run</span> <span class="pre">&lt;container&gt;</span></code>. Some of them interact with the host but they don’t necessarily
need to.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Paks commands work by way of ensuring that history is written to file upon container init
using <code class="docutils literal notranslate"><span class="pre">history</span> <span class="pre">-a</span></code>. If your container OS doesn’t support this you will still be able to run
Paks commands, but likely not via history (pressing up or down). To retrieve history
we also assume the history file to be at <code class="docutils literal notranslate"><span class="pre">~/root/bash_history</span></code> so if this is
different for your container, make sure to set <code class="docutils literal notranslate"><span class="pre">-s</span> <span class="pre">history_file=/path/.history</span></code>
when you paks run.</p>
</div>
<div class="section" id="save">
<h3>Save<a class="headerlink" href="#save" title="Permalink to this headline"></a></h3>
<p>The most useful thing (I think) as a developer that I sometimes want to do is
save my container. This obviously doesn’t include mounted volumes, but it does
include changes I’ve made the filesystem. A save comes down to:</p>
<ol class="arabic simple">
<li>Committing the current state</li>
<li>Squashing layers to not be in danger of going over the limit.</li>
<li>Saving the container with a suffix (e.g., <code class="docutils literal notranslate"><span class="pre">-saved</span></code>).</li>
</ol>
<p>So let’s say that we do a paks run, and then attempt a save. That might
look like this:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>paks run ubuntu
<span class="gp"># </span>touch PANCAKES
<span class="gp"># </span><span class="c1">#save</span>
<span class="go">Saving container...</span>
<span class="go">sha256:d82aaa268feb59344cf31a757ce7f5c0caa6a6bbd10b8d0af1d55cdbc50b609b</span>
<span class="go">[+] Building 0.2s (5/5) FINISHED</span>
<span class="go">...</span>
<span class="go">=&gt; =&gt; writing image sha256:f58ae524d8644400b33c078f19612cba7849ef8f3ea158e2291ac697a4129080</span>
<span class="go">=&gt; =&gt; naming to docker.io/library/busybox-saved</span>
<span class="go">Untagged: dockerio-busybox-joyous-hippo-3922-gloopy-peanut-9044:latest</span>
<span class="go">Deleted: sha256:d82aaa268feb59344cf31a757ce7f5c0caa6a6bbd10b8d0af1d55cdbc50b609b</span>
<span class="go">Deleted: sha256:f58ae524d8644400b33c078f19612cba7849ef8f3ea158e2291ac697a4129080</span>
<span class="go">Successfully saved container! ⭐️</span>
<span class="gp">#</span>save
</pre></div>
</div>
<p>And then you can see that there is an ubuntu-saved container!</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>docker images <span class="p">|</span> grep ubuntu
<span class="go">ubuntu-saved                                      latest    93e336d994de   2 minutes ago   72.8MB</span>
<span class="go">ubuntu                                            latest    54c9d81cbb44   7 days ago      72.8MB</span>
</pre></div>
</div>
<p>We could change the suffix of the thing saved too, because paks commands accept different kinds of arguments
and key word arguments (kwargs). In this case, the suffix is a keyword:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>paks run ubuntu
<span class="gp"># </span>touch PANCAKES
<span class="gp"># </span><span class="c1">#save suffix=-pancakes</span>
<span class="go">...</span>
<span class="gp">#</span><span class="m">5</span> writing image sha256:6d3b5b27d0b15054eada3159a14c8c1a7fb251e6553adeddc37f54f0cfc9cc33 <span class="k">done</span>
<span class="gp">#</span><span class="m">5</span> naming to docker.io/library/ubuntu-pancakes <span class="k">done</span>
<span class="gp">#</span><span class="m">5</span> DONE <span class="m">0</span>.0s

<span class="go">Untagged: dockerio-ubuntu-rugged-leg-4547-whispering-nunchucks-1604:latest</span>
<span class="go">Deleted: sha256:e6609a04affa74dd17fc931f1217503207f1b5030d82edaf657d30627511d53c</span>
<span class="go">Successfully saved container! ⭐️</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Your bash history will be written to ~/.bash_history. This (along with other likely
precautions) we will need to think about carefully and write up the documentation here.
For now you should assume that this is for your development purposes only and
the tool should only be run by a trusted user in an environment he or she owns.</p>
</div>
</div>
<div class="section" id="inspect">
<h3>Inspect<a class="headerlink" href="#inspect" title="Permalink to this headline"></a></h3>
<p>If you are forgetting labels or environment, inspect can help! The basic inspect will
dump the entire json to the terminal:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>paks run ubuntu
<span class="gp">root@bdda5c133e23:/# #</span>inspect
<span class="go">Inspecting Container...</span>
<span class="go">[</span>
<span class="go">    {</span>
<span class="go">        &quot;Id&quot;: &quot;bdda5c133e230c70112899c0d9a800d68487884380b441fbd4ce2874b3c91696&quot;,</span>
<span class="go">        &quot;Created&quot;: &quot;2022-02-10T20:48:51.114405695Z&quot;,</span>
<span class="go">        &quot;Path&quot;: &quot;/bin/bash&quot;,</span>
<span class="go">        &quot;Args&quot;: [],</span>
<span class="go">        &quot;State&quot;: {</span>
<span class="go">            &quot;Status&quot;: &quot;running&quot;,</span>
<span class="go">            &quot;Running&quot;: true,</span>
<span class="go">            ...</span>
</pre></div>
</div>
<p>]</p>
<p>That gives you the entire inspection (config, networking, mounts, drivers, etc.) however
you can also ask to see a specific section in entirety:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>paks run ubuntu
<span class="gp">root@bdda5c133e23:/# #</span>inspect config
</pre></div>
</div>
</div>
<div class="section" id="load">
<h3>Load<a class="headerlink" href="#load" title="Permalink to this headline"></a></h3>
<p><strong>Not implemented yet</strong></p>
<p>Given a custom set of paks commands (from an external repo or provided as modules in paks) you can load
them into your shell as follows:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>paks run ubuntu
<span class="gp">root@bdda5c133e23:/# #</span>load commandgroup
</pre></div>
</div>
</div>
<div class="section" id="copy">
<h3>Copy<a class="headerlink" href="#copy" title="Permalink to this headline"></a></h3>
<p>It’s relatively easy to copy files to the host from the container and vice versa.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>touch PANCAKES.txt
<span class="gp">$ </span>paks run ubuntu
<span class="gp">root@68e45b9af2b6:/# #</span>cp host:PANCAKES.txt CONTAINER-PANCAKES.txt
<span class="gp">root@e4434757d343:/# </span>ls
<span class="go">CONTAINER-PANCAKES.txt  dev   lib    libx32  opt   run   sys  var</span>
<span class="go">bin                     etc   lib32  media   proc  sbin  tmp</span>
<span class="go">boot                    home  lib64  mnt     root  srv   usr</span>
</pre></div>
</div>
<p>And then copy it back!</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>paks run ubuntu
<span class="gp">root@68e45b9af2b6:/# #</span>cp CONTAINER-PANCAKES.txt host:FINISHED-PANCAKES.txt
<span class="gp">root@68e45b9af2b6:/#</span>
<span class="gp">$ </span>ls <span class="p">|</span>grep FINISHED
<span class="go">FINISHED-PANCAKES.txt</span>
</pre></div>
</div>
</div>
<div class="section" id="environment">
<h3>Environment<a class="headerlink" href="#environment" title="Permalink to this headline"></a></h3>
<p>Paks will have a suite of commands intended to load, save, and otherwise interact with the environment.
(not implemented yet!). For example, let’s say you are in a container and want to save an envar to a named
environment. This will export AND save the environment:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>paks run ubuntu
<span class="gp">root@9ec6c3d43591:/# #</span>envsave github <span class="nv">GITHUB_USER</span><span class="o">=</span>dinosaur
<span class="go">Saving environment variable...</span>
<span class="go">Successfully added and exported environment variables.</span>

<span class="gp">root@9ec6c3d43591:/#  </span><span class="nb">export</span> <span class="nv">GITHUB_USER</span><span class="o">=</span>dinosaur
</pre></div>
</div>
<p>The above will save your GITHUB_USER to the named environment <code class="docutils literal notranslate"><span class="pre">github</span></code>, which you can then
load on demand in the same (or another) container. How do you load an environment? Like this:
Notice that the export is written in plain site for you to verify.
Now let’s try loading. We originally just had a token, so now we should have
the username “dinosaur” too:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">root@9ec6c3d43591:/# #</span>envload github
<span class="go">Loading environment...</span>
<span class="go">Successfully loaded environment github</span>

<span class="gp">root@9ec6c3d43591:/#  </span><span class="nb">export</span> <span class="nv">GITHUB_TOKEN</span><span class="o">=</span>xxxxxxxxx
<span class="gp">root@9ec6c3d43591:/#  </span><span class="nb">export</span> <span class="nv">GITHUB_USER</span><span class="o">=</span>dinosaur
</pre></div>
</div>
<p>Let’s now verify the envars are exported to the environment!</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">root@9ec6c3d43591:/# </span>env <span class="p">|</span> grep GITHUB
<span class="go">GITHUB_USER=dinosaur</span>
<span class="go">GITHUB_TOKEN=xxxxxxxxx</span>
</pre></div>
</div>
<p>If there is an envar exported in your host environment that you forgot to include?
You can grab it.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span><span class="nb">export</span> <span class="nv">PANCAKES</span><span class="o">=</span>thebest
<span class="gp">$ </span>paks run ubuntu
<span class="gp">root@71d6d3e92249:/# #</span>envhost PANCAKES
<span class="go">Getting host environment variable...</span>
<span class="go">Successfully loaded environment variables.</span>

<span class="gp">root@71d6d3e92249:/# </span><span class="nb">export</span> <span class="nv">PANCAKES</span><span class="o">=</span>thebest
<span class="gp">root@71d6d3e92249:/# </span>env <span class="p">|</span> grep PANCAKES
<span class="go">PANCAKES=thebest</span>
</pre></div>
</div>
<p>More coming soon!</p>
<blockquote>
<div><ul class="simple">
<li>saving of sboms outside of the container (custom container)</li>
<li>and probably more!</li>
</ul>
</div></blockquote>
</div>
</div>
<div class="section" id="security">
<h2>Security<a class="headerlink" href="#security" title="Permalink to this headline"></a></h2>
<p>Paks is intended to be run by a developer user that has both control of the host
and the container. Since copying / saving and otherwise interacting with the host
is possible, you would not run Paks on a production system for an untrusted user
to allow interactions with the host machine.</p>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="settings.html" class="btn btn-neutral float-left" title="Settings" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="developer-guide.html" class="btn btn-neutral float-right" title="Developer Guide" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021-2022, Vanessa Sochat and Alec Scott.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>